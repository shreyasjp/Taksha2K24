<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta id="viewport" name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, viewport-fit=cover" />
    <script type="text/javascript" src="Data/Libraries/jQuery.js"></script>
    <link rel="preload" href="Data/Fonts/Montserrat Regular 400.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/Montserrat Italic 400.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/Montserrat Bold 700.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/Montserrat Black 900.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/Montserrat Thin 250.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/The Youngest Serif.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="Data/Fonts/Estrand 400.otf" as="font" type="font/otf" crossorigin />
    <link rel="preload" as="image" href="Data/Animations/SpinnerMedium.svg" />
    <link rel="preload" as="image" href="Data/Animations/SpinnerSmall.svg" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="Design/Colors.css" />    
    <link rel="stylesheet" type="text/css" href="Design/Fonts.css" />
    <link rel="stylesheet" type="text/css" href="Design/NavBar.css" />
    <link rel="stylesheet" type="text/css" href="Design/Home.css" />
    <link rel="stylesheet" type="text/css" href="Design/Countdown.css" />
    <link rel="stylesheet" type="text/css" href="Design/Register.css" />
    <title>Taksha'24 - Register</title>
    <link rel="apple-touch-icon" sizes="180x180" href="Data/Favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="Data/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="Data/Favicon/favicon-16x16.png">
    <link rel="manifest" href="Data/Favicon/site.webmanifest">
    <link rel="mask-icon" href="Data/Favicon/safari-pinned-tab.svg" color="#000000">
    <link rel="shortcut icon" href="Data/Favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-config" content="Data/Favicon/browserconfig.xml">
    <meta name="theme-color" content="#000000">
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "kn8uu34369");
    </script>
</head>
<body>
    <h1></h1>
    <p></p>
    <form id="myForm" action="">
        <div class="input-bx">
            <input type="text" id="clg-name" name="college" required="required" />
            <span>Name of College</span>
        </div>        
        <p class="error hide">Enter a valid name without numbers or special characters.</p>
        <div class="input-bx">
            <input type="text" id='std-name' name="name" required="required" />
            <span>Name</span>
        </div>
        <p class="error hide">Enter a valid name without numbers or special characters.</p>
        <div class="input-bx">
            <input type="text" id="std-num" name="contactNumber" required="required" />
            <span>Contact Number</span>
        </div>
        <p class="error hide">Enter a valid phone number.</p>
        <!-- Additional input box for 'ONE PIECE' -->
        <div class="input-bx" id="extraInputBox" style="display: none;">
            <input type="text" id="std-mem1" name="member1"  />
            <span>Name of Member 1</span>
        </div>
        <p class="error hide">Enter a valid name without numbers or special characters.</p>
        <div class="input-bx" id="xtraInputBox" style="display: none;">
            <input type="text" id="std-mem2" name="member2"  />
            <span>Name of Member 2</span>
        </div>
        <p class="error hide">Enter a valid name without numbers or special characters.</p>
        <div class="input-bx" id="traInputBox" style="display: none;">
            <input type="text" id="std-mem3"  name="member3"  />
            <span>Name of Member 3</span>
        </div>
        <p class="error hide">Enter a valid name without numbers or special characters.</p>
        <div class="input-bx" style="display: none;" >
            <input type="text" id="raInputBox" value=""  name="event"  />
        </div>
        <div id="submit-bx" class="input-bx">
            <input id="submit" type="submit">
            <center><img id="submit-loader" style="display: none;" src="Data/Animations/SpinnerSmall.svg" /></center>
        </div>
        <p class="message" style="display: none;">Thank you for joining&nbsp<span>TAKSHA'24</span></p>
    </form>
    

    <script type="text/javascript" src="Interaction/InputLabelHandling.js"></script>
    <script>
        const submitLoader = document.getElementById('submit-loader');
        const submitButton = document.getElementById('submit');
        const message = document.querySelector('.message')
        
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        var detailValue = getParameterByName('detail');

        // Update the h1 element based on detailValue
        if(detailValue == 'op') {
            document.querySelector('h1').innerHTML = 'ONE PIECE';
            document.querySelector('p').innerHTML = 'TREASURE HUNTING EVENT';
            // Show the additional input box for 'ONE PIECE'
            document.getElementById('extraInputBox').style.display = 'flex';
            document.querySelector('input[name="member1"]').required = true;
            document.getElementById('xtraInputBox').style.display = 'flex';
            document.querySelector('input[name="member2"]').required = true;
            document.getElementById('traInputBox').style.display = 'flex';
            document.querySelector('input[name="member3"]').required = true;
            document.getElementById('raInputBox').value = 'onepiece';
        }
        else if(detailValue == 'tt') {
            document.querySelector('h1').innerHTML = 'TWIST\'N\'TURN';
            document.querySelector('p').innerHTML = 'SPEED CUBING EVENT';
            document.getElementById('raInputBox').value = 'twistnturn';
            
        }
        else if(detailValue == 'tq') {
            document.querySelector('h1').innerHTML = 'THINKQUAKE';
            document.querySelector('p').innerHTML = 'IDEA PITCHING EVENT';
            document.getElementById('extraInputBox').style.display = 'flex';
            document.querySelector('input[name="member1"]').required = true;
            document.getElementById('xtraInputBox').style.display = 'flex';
            document.getElementById('raInputBox').value = 'thinkquake';
        }
        else if(detailValue == 'ct') {
            document.querySelector('h1').innerHTML = 'CREATRIX';
            document.querySelector('p').innerHTML = 'WEB DESIGNING EVENT';
            document.getElementById('extraInputBox').style.display = 'flex';
            document.getElementById('raInputBox').value = 'creatrix';
        }
        else if(detailValue == 'll') {
            document.querySelector('h1').innerHTML = 'LETHAL LEGION';
            document.querySelector('p').innerHTML = 'E-SPORTS COMPETITION';
            document.getElementById('extraInputBox').style.display = 'flex';
            document.querySelector('input[name="member1"]').required = true;
            document.getElementById('xtraInputBox').style.display = 'flex';
            document.querySelector('input[name="member2"]').required = true;
            document.getElementById('traInputBox').style.display = 'flex';
            document.querySelector('input[name="member3"]').required = true;
            document.getElementById('raInputBox').value = 'lethallegion';
        }
        else if(detailValue == 'bb') {
            document.querySelector('h1').innerHTML = 'BUGBOUNTY';
            document.querySelector('p').innerHTML = 'DEBUGGING CONTEST';
            document.getElementById('raInputBox').value = 'bugbounty';
        }
        document.getElementById('myForm').addEventListener('submit', function(event) {
        
        event.preventDefault();
        if(clg_name_status === 'true' && name_status === 'true' && phone_status === 'true' && mem1_status === 'true' && mem2_status === 'true' && mem3_status === 'true'){
            submitLoader.style.display = 'flex';
        submitButton.style.display = 'none';
        var formData = new FormData(this);

        fetch('https://script.google.com/macros/s/AKfycbyHfSJHtS2eKoAOQ5U52VcGqc1uaOMV9qX2v93_Ff0bTKn-hsYfyiq_4G11LdbxwDR4/exec', {
            method: 'POST',
            body: formData
        }).then(response => {
            if (response.ok) {
                submitLoader.style.display = 'none';
                submitButton.style.display = 'flex';
                document.getElementById('myForm').reset();
                message.style.display = 'flex';
                setTimeout(()=>{
                    message.style.display = 'none';
                },2000)
                setTimeout(()=>{
                    window.location.href = 'index.html'
                },1000)                
            } else {                
                submitLoader.style.display = 'none';
                submitButton.style.display = 'flex';
                message.textContent = "There was a problem at our side. Please try again later.";
                message.style.display = 'flex';
                setTimeout(()=>{
                    message.style.display = 'none';
                },2000)
            }
        }).catch(error => {
            console.error('Error during form submission:', error);
        });
        }
    });
    </script>
</body>
</html>
